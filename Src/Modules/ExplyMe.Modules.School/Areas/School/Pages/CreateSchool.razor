@page "/school/create"
@attribute [Authorize]

@inject ISchoolCreator SchoolCreator
@inject NavigationManager NavigationManager


<EditForm Model="@School" OnSubmit="(async () => await Submit())">
    <div class="card mx-auto shadow mt-4" style="width: 1200px">
        <div class="card-body">
            <div class="container">
                <div class="row">
                    <div class="col">
                        <br>
                        <img class="thumbnail rounded-circle mx-auto d-block" src="https://uploaddeimagens.com.br/images/003/036/239/original/undraw_Building_re_xfcm.png?1610836461" style="width: 300px" />
                        <br>
                        <a href="#" class="d-grid col-6 btn btn-primary disabled mx-auto" aria-disabled="true" role="button" data-bs-toggle="button">Criar Escola</a>
                    </div>

                    <div class="col-8">
                        <br />
                        <label>Nome:</label>
                        <InputText id="displayName" class="form-control" @bind-Value="School.DisplayName" />

                        <br />
                        <label>Descrição:</label>
                        <InputText id="bio" class="form-control" @bind-Value="School.Bio" />

                        <br />
                        <label>Site Institucional:</label>
                        <InputText id="friendlyUrl" class="form-control" @bind-Value="School.FriendlyUrl" />

                        <br />
                        <label>Url do Logotipo da Escola:</label>
                        <InputText id="logoUrl" class="form-control" @bind-Value="School.LogoUrl" />

                        <br />
                        <label class="form-check-label">Escola Pública</label>
                        <InputCheckbox id="isPublic" class="form-check-input" @bind-Value="School.IsPublic" />


                        <br />
                        <button type="submit" class="d-block btn btn-success btn-lg mx-auto">Cadastrar</button>
                        <br />
                    </div>
                </div>
            </div>
        </div>
    </div>
</EditForm>


@code {

    public static string Title => "Criar Escola";

    private SchoolEntity School { get; set; } = new SchoolEntity();

    private async Task Submit()
    {
        var school = await SchoolCreator.CreateAsync(School);

        var urlToRedirect = $"/school/{school.Id}/details";

        NavigationManager.NavigateTo(urlToRedirect);
    }
}
